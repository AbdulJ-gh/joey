{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "worker",
  "type": "object",
  "required": [ "version", "handlers"],
  "additionalProperties": false,
  "properties": {
    "version":  { "type": "string" },
    "logger":  { "type": "string" },
    "schemas": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "include": { "type": ["string", "array"], "items": { "type": "string" }, "default": "./src/**/*.schema.ts" },
        "exclude": { "type": ["string", "array"], "items": { "type": "string" }, "default": [] }
      }
    },
    "build": { "$ref": "https://example.com/schema/build", "default": {} },
    "middleware":  {
      "type": "object",
      "additionalProperties": false,
      "default": {},
      "properties": {
        "root":  { "type": "string", "default": "./src/middleware"  },
        "handlers": { "$ref": "https://example.com/schema/keyValueStringObject", "default": {} }
      }
    },
    "global":  {
      "type": "object",
      "additionalProperties": false,
      "default": {},
      "properties": {
        "options": { "$ref": "https://example.com/schema/options", "default": {} },
        "middleware": { "type": "array", "items": { "type": "string" }, "default": [] },
        "defaultErrors": { "$ref": "https://example.com/schema/defaultErrors", "default": {} }
      }
    },
    "handlers": {
      "type": "object",
      "additionalProperties": false,
      "default": {},
      "properties": {
        "root":  { "type": "string", "default": "./src/handlers"  },
        "fetch": {
          "type": "object",
          "patternProperties": {
            "^.*$": { "$ref": "https://example.com/schema/handler" }
          },
          "default": {}
        },
        "scheduled": {
          "type": "object",
          "patternProperties": {
            "^.*$": { "$ref": "https://example.com/schema/scheduled" }
          },
          "default": {}
        },
        "queue": {
          "type": "object",
          "patternProperties": {
            "^.*$": { "$ref": "https://example.com/schema/queue" }
          },
          "default": {}
        }
      }
    }
  }
}
